---
title: vimdiff使用介绍
date: 2023-05-21 09:47:58
tags:
    - vimdiff
---

在日常的程序开发中，我们经常需要比较两个文件或不同版本之间的差异。而 `vimdiff` 就是一个非常好用的命令行工具，可以方便地进行文件比较和差异解决。接下来，本文将介绍 `vimdiff` 的基本使用方法。

<!-- more -->

### 打开 `vimdiff`

在终端中输入以下命令即可打开 `vimdiff`：

``` bash
vimdiff file1.txt file2.txt
```

其中 `file1.txt` 和 `file2.txt` 是要进行比较的两个文件的路径。

### 比较文件

打开 `vimdiff` 后，您将会看到两个窗口，每个窗口显示一个文件。所有的差异都会被突出显示。您可以通过按 `Ctrl+w` 然后再按 `w` 键来在窗口之间切换。

### 导航差异

您可以使用 `vim` 的标准导航命令来浏览差异，例如：

- 使用 `j` 和 `k` 键在差异之间上下移动
- 使用 `h` 和 `l` 键在两个文件之间左右移动

### 解决差异

- 使用`:diffget`命令会将光标所在行差异,从非光标所在窗口复制到光标所在窗口相应的位置上
- 使用`:diffput`命令会将光标所在行差异,从光标所在窗口复制到非光标所在窗口相应的位置上

可以使用行范围来指定要合并的代码块
例如：`:2,5diffget` 将从光标所在窗口的第2行到第5行的文本复制到左侧窗口中的相应位置上
例如：`:2,5diffput` 将从光标所在窗口的第2行到第5行的文本复制到右侧窗口中的相应位置上

### 重新加载文件并进行新的比较

使用 `:diffupdate` 命令重新加载文件并进行新的比较

### 保存并退出

完成差异解决后，使用以下命令即可保存更改并退出 `vimdiff`：

```
:wqa
```

### vimdiff常用快捷键

前提光标位于左侧窗口
| 操作 | 快捷键 |
| --- | --- |
| 在窗口之间切换 | `Ctrl+w` `w` |
| 跳转到下一个差异 | `]c` |
| 跳转到上一个差异 | `[c` |
| 将差异从左侧复制到右侧 | `do` |
| 将差异从右侧复制到左侧 | `dp` |
| 打开折叠 | `zo` |
| 关闭折叠 | `zc` |
| 打开所有折叠 | `zR` |
| 关闭所有折叠 | `zM` |
| 重新加载文件并更新比较结果 | `Ctrl+L` |
